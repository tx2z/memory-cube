!function(e){function t(t,n){function o(t){c.logging&&("undefined"!=typeof console?console.log(t):e("body").append("<br /> * "+t))}function r(t){if(t.originalEvent&&"undefined"!=typeof t.originalEvent.touches){if(o("Touchable Touchstart touches length "+t.originalEvent.touches.length),1!==t.originalEvent.touches.length&&2!==t.originalEvent.touches.length)return!1;if(c.isCurrentlyTouching)return!1;c.isCurrentlyTouching=!0,1==t.originalEvent.touches.length?(c.isOneFingerGesture=!0,c.startTouch.x=c.previousTouch.x=t.originalEvent.touches[0].clientX,c.startTouch.y=c.previousTouch.y=t.originalEvent.touches[0].clientY):2==t.originalEvent.touches.length&&(c.isOneFingerGesture=!1,t.originalEvent.touches[0].clientY>t.originalEvent.touches[1].clientY?(c.startTouch.x=c.previousTouch.x=t.originalEvent.touches[0].clientX,c.startTouch.y=c.previousTouch.y=t.originalEvent.touches[0].clientY):(c.startTouch.x=c.previousTouch.x=c.touches[1].clientX,c.startTouch.y=c.previousTouch.y=c.touches[1].clientY))}else o("Touchable Touchstart touches length "+t.pageX+" "+t.pageY),c.startTouch.x=c.previousTouch.x=t.pageX,c.startTouch.y=c.previousTouch.y=t.pageY,e(document).bind("mousemove",u),e(document).bind("mouseup",i);c.target=t.target,c.currentTarget=t.currentTarget;var n=c.startTouch.x,r=c.startTouch.y;c.hitTarget=document.elementFromPoint?document.elementFromPoint(n,r):"",c.inDoubleTap?(o("Touchable doubleTap"),c.$elem.trigger("doubleTap",c),clearTimeout(c.doubleTapTimer),c.inDoubleTap=!1):(c.inDoubleTap=!0,c.doubleTapTimer=setTimeout(function(){c.inDoubleTap=!1},350)),c.longTapTimer=setTimeout(function(){o("Touchable longTap"),e(c.elem).trigger("longTap",c)},1e3),o("Touchable Tap"),e(c.elem).trigger("tap",c),e(c.elem).trigger("touchablestart",c)}function u(t){if(t.originalEvent&&"undefined"!=typeof t.originalEvent.touches){if(o("Touchable Touchsmove touches length "+t.originalEvent.touches.length),1!==t.originalEvent.touches.length&&2!==t.originalEvent.touches.length)return!1;1==t.originalEvent.touches.length||c.isOneFingerGesture?(c.currentTouch.x=t.originalEvent.touches[0].clientX,c.currentTouch.y=t.originalEvent.touches[0].clientY):2!=t.originalEvent.touches.length||c.isOneFingerGesture||(t.originalEvent.touches[0].clientY>t.originalEvent.touches[1].clientY?(c.currentTouch.x=t.originalEvent.touches[0].clientX,c.currentTouch.y=t.originalEvent.touches[0].clientY):(c.currentTouch.x=t.originalEvent.touches[1].clientX,c.currentTouch.y=t.originalEvent.touches[1].clientY))}else t.preventDefault(),c.currentTouch.x=t.pageX,c.currentTouch.y=t.pageY;e(c.elem).removeClass("webkitAnimate"),c.currentDelta.x=c.currentTouch.x-c.previousTouch.x,c.currentDelta.y=c.currentTouch.y-c.previousTouch.y,c.currentStartDelta.x=c.currentTouch.x-c.startTouch.x,c.currentStartDelta.y=c.currentTouch.y-c.startTouch.y,c.currentPosition.x=c.currentPosition.x+c.currentDelta.x,c.currentPosition.y=c.currentPosition.y+c.currentDelta.y,c.previousTouch.x=c.currentTouch.x,c.previousTouch.y=c.currentTouch.y,o("Touchable Touchablemove self e.target"+t.target+"e.currentTarget "+t.currentTarget+" x:"+c.currentStartDelta.x),c.target=t.target,c.currentTarget=t.currentTarget;var n=c.currentTouch.x,r=c.currentTouch.y;c.hitTarget=document.elementFromPoint?document.elementFromPoint(n,r):"",e(c.elem).trigger("touchablemove",c),c.longTapTimer&&clearTimeout(c.longTapTimer)}function i(t){if(t.originalEvent&&"undefined"!=typeof t.originalEvent.touches){if(t.originalEvent.targetTouches.length>0)return!1}else e(document).unbind("mousemove",u),e(document).unbind("mouseup",i);c.isCurrentlyTouching=!1,c.longTapTimer&&clearTimeout(c.longTapTimer),o("Touchable Touchend self "+c.currentStartDelta.x),e(c.elem).trigger("touchableend",c),o("Touchable: touchableend"),o("Touchable: Hittarget click")}this.logging=!1,this.elem=t,this.$elem=e(t),this.is_doubleTap=!1,this.is_currentlyTouching=!1,this.isOneFingerGesture=!1,this.startTouch={x:0,y:0},this.currentTouch={x:0,y:0},this.previousTouch={x:0,y:0},this.currentDelta={x:0,y:0},this.currentStartDelta={x:0,y:0},this.currentPosition={x:0,y:0},this.doubleTapTimer=null,this.longTapTimer=null,this.touchStartSupported=!1;var c=this;"undefined"!=typeof n&&("undefined"!=typeof n.logging&&(this.logging=n.logging),"undefined"!=typeof n.preventClick&&(this.preventClick=n.preventClick)),this.$elem.bind("touchstart",function(e){c.touchStartSupported=!0,r(e)}),this.$elem.bind("mousedown",function(e){return c.touchStartSupported||r(e),!1}),this.$elem.bind("touchmove",u),this.$elem.bind("touchend",i),this.preventClick&&this.$elem.bind("click",function(e){e.preventDefault()})}e.fn.Touchable=function(n){return this.each(function(){var o=e(this).data.Touchable=new t(this,n);return o})},e.fn.newHover=function(t,n){return this.each(function(){e(this).bind("newHoverIn",t).bind("newHoverOut",n)})},e.fn.newHover2=function(t,n){return this.each(function(){e(this).bind("newHoverIn2",t).bind("newHoverOut2",n)})},e.Touchable=t}(Zepto);